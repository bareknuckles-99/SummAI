<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Upload Study Material</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}" />
  <style>
    /* Hidden native/default file input */
    input[type="file"] { display: none; }

    /* Choose File animated button */
    #fileLabel {
      position: relative;
      display: inline-block;
      padding: 16px 48px;
      font-size: 1.3rem;
      font-weight: 700;
      color: #000;
      background: white;
      border-radius: 50px;
      cursor: pointer;
      overflow: hidden;
      user-select: none;
      box-shadow: 0 0 8px rgba(0,0,0,0.1);
      transition: background-color 0.3s ease, color 0.3s ease;
      margin-bottom: 30px;
      z-index: 1;
      font-family: inherit; 
    }

    /* Star container for falling stars */
    #fileLabel .star-container {
      position: absolute;
      inset: 0;
      pointer-events: none;
      overflow: hidden;
      border-radius: 50px;
      z-index: 0;
    }

    /* The star elements */
    .star {
      position: absolute;
      top: -12px;
      border-radius: 50%;
      opacity: 0.8;
      animation-timing-function: linear;
      animation-iteration-count: infinite;
      animation-duration: 3s;
      filter: drop-shadow(0 0 1px black);
      z-index: 0;
      background: black;
    }

    /* Bigger star sizes restored */
    .star:nth-child(1) {
      left: 10%;
      width: 6px;
      height: 6px;
      animation-name: fallStarsWhite;
      animation-delay: 0s;
    }
    .star:nth-child(2) {
      left: 25%;
      width: 5px;
      height: 5px;
      animation-name: fallStarsWhite;
      animation-delay: 0.6s;
    }
    .star:nth-child(3) {
      left: 40%;
      width: 7px;
      height: 7px;
      animation-name: fallStarsWhite;
      animation-delay: 1.2s;
    }
    .star:nth-child(4) {
      left: 55%;
      width: 6px;
      height: 6px;
      animation-name: fallStarsWhite;
      animation-delay: 1.8s;
    }
    .star:nth-child(5) {
      left: 70%;
      width: 5px;
      height: 5px;
      animation-name: fallStarsWhite;
      animation-delay: 2.4s;
    }
    .star:nth-child(6) {
      left: 85%;
      width: 6px;
      height: 6px;
      animation-name: fallStarsWhite;
      animation-delay: 3s;
    }

    @keyframes fallStarsWhite {
      0% { transform: translateY(-12px); opacity: 0.8; }
      100% { transform: translateY(40px); opacity: 0; }
    }

    /* Hover: invert colors and stars become white falling on black background */
    #fileLabel:hover {
      background: black;
      color: white;
      box-shadow: 0 0 12px rgba(255,255,255,0.9);
    }

    #fileLabel:hover .star {
      background: white;
      filter: drop-shadow(0 0 3px white);
      animation-name: fallStarsBlack;
    }

    @keyframes fallStarsBlack {
      0% { transform: translateY(-12px); opacity: 0.9; }
      100% { transform: translateY(40px); opacity: 0; }
    }

    /* ===== Buttons container ===== */
    #buttonsContainer {
      display: flex;
      justify-content: center;
      gap: 30px;
      margin-top: 16px;
    }

    /* Hidden by default */
    #buttonsContainer.hidden {
      display: none !important;
    }

    /* Common button styles */
    #buttonsContainer button {
      position: relative;
      padding: 14px 36px;
      font-size: 1.3rem;         /* Match choose file font size */
      font-weight: 700;
      border: none;
      border-radius: 50px;
      cursor: pointer;
      color: white;
      overflow: hidden;
      user-select: none;
      transition: background-color 0.3s ease, box-shadow 0.3s ease;
      width: 180px;
      height: 60px;
      background: #333;
      box-shadow: 0 0 8px rgba(255,255,255,0.15);
      z-index: 1;
      font-family: inherit; /* match the font family */
    }

    #buttonsContainer button:focus {
      outline: none;
      box-shadow: 0 0 12px 3px #fff;
    }

    /* --- Summarize Button --- */
    #btnSummarize {
      background: linear-gradient(135deg, #00416A, #E4E5E6);
      color: #002737;
      box-shadow: 0 0 15px #0088cc99;
    }
    #btnSummarize:hover {
      background: linear-gradient(135deg, #E4E5E6, #00416A);
      color: white;
      box-shadow: 0 0 20px #00aaffdd;
    }
    #btnSummarize .bg-animation {
      position: absolute;
      inset: 0;
      overflow: visible;
      pointer-events: none;
      filter: drop-shadow(0 0 2px #0099ffcc);
      z-index: 0;
    }
    /* swirling pages */
    #btnSummarize .swirl {
      position: absolute;
      width: 18px;
      height: 18px;
      border: 2px solid #0099ffcc;
      border-radius: 3px;
      opacity: 0.5;
      animation: swirlAnim 3s linear infinite;
      top: 50%;
      left: 10%;
      transform-origin: 50% 50%;
    }
    #btnSummarize .swirl:nth-child(2) {
      animation-delay: 1s;
      width: 14px;
      height: 14px;
      border-color: #00ccffaa;
      left: 35%;
      top: 40%;
    }
    #btnSummarize .swirl:nth-child(3) {
      animation-delay: 2s;
      width: 22px;
      height: 22px;
      border-color: #0066ccbb;
      left: 70%;
      top: 60%;
    }
    @keyframes swirlAnim {
      0% { transform: rotate(0deg) translateX(8px) rotate(0deg);}
      100% { transform: rotate(360deg) translateX(8px) rotate(-360deg);}
    }

    /* --- Create Notes Button --- */
    #btnCreateNotes {
      background: linear-gradient(135deg, #7b4397, #dc2430);
      color: white;
      box-shadow: 0 0 15px #bb33cccc;
    }
    #btnCreateNotes:hover {
      background: linear-gradient(135deg, #dc2430, #7b4397);
      box-shadow: 0 0 25px #ee55eeff;
    }
    #btnCreateNotes .bg-animation {
      position: absolute;
      inset: 0;
      pointer-events: none;
      overflow: visible;
      filter: drop-shadow(0 0 3px #ff66cccc);
      z-index: 0;
    }
    /* pencil animations */
    #btnCreateNotes .pencil {
      position: absolute;
      width: 20px;
      height: 6px;
      background: #fff;
      border-radius: 2px;
      top: 50%;
      left: 10%;
      box-shadow: inset 0 0 4px #aaa;
      animation: pencilMove 2.5s ease-in-out infinite alternate;
    }
    #btnCreateNotes .pencil:nth-child(2) {
      left: 40%;
      animation-delay: 1.2s;
      height: 5px;
    }
    #btnCreateNotes .pencil:nth-child(3) {
      left: 75%;
      animation-delay: 2s;
      height: 7px;
    }
    @keyframes pencilMove {
      0% { transform: translateY(-3px) rotate(-10deg);}
      100% { transform: translateY(3px) rotate(10deg);}
    }

    /* --- Evaluate Button --- */
    #btnEvaluate {
      background: linear-gradient(135deg, #0f9b0f, #7ef67e);
      color: #004400;
      box-shadow: 0 0 15px #44bb4444;
    }
    #btnEvaluate:hover {
      background: linear-gradient(135deg, #7ef67e, #0f9b0f);
      color: white;
      box-shadow: 0 0 25px #55cc5566;
    }
    #btnEvaluate .bg-animation {
      position: absolute;
      inset: 0;
      pointer-events: none;
      overflow: visible;
      filter: drop-shadow(0 0 4px #44cc44cc);
      z-index: 0;
    }
    /* glowing checkmarks */
    #btnEvaluate .checkmark {
      position: absolute;
      width: 16px;
      height: 16px;
      border-left: 3px solid #2e8b2e;
      border-bottom: 3px solid #2e8b2e;
      transform: rotate(-45deg);
      top: 50%;
      left: 20%;
      opacity: 0.6;
      animation: glowCheck 3s ease-in-out infinite alternate;
      box-shadow: 0 0 6px #44cc44aa;
      border-radius: 2px;
    }
    #btnEvaluate .checkmark:nth-child(2) {
      left: 50%;
      top: 40%;
      animation-delay: 1.5s;
      width: 20px;
      height: 20px;
      border-color: #44cc44cc;
      box-shadow: 0 0 8px #55ff5588;
    }
    #btnEvaluate .checkmark:nth-child(3) {
      left: 80%;
      top: 60%;
      animation-delay: 2.6s;
      width: 14px;
      height: 14px;
      border-color: #339933aa;
      box-shadow: 0 0 4px #33cc3399;
    }
    @keyframes glowCheck {
      0% { opacity: 0.4; box-shadow: 0 0 6px #44cc44aa;}
      100% { opacity: 1; box-shadow: 0 0 15px #77ff77ff;}
    }
  </style>
</head>
<body>
  <h1>Upload Your Notes</h1>

  <form id="uploadForm" method="POST" enctype="multipart/form-data">
    <!-- visible label styled as animated button -->
    <label for="file" id="fileLabel">
      Choose File
      <div class="star-container" aria-hidden="true">
        <div class="star"></div>
        <div class="star"></div>
        <div class="star"></div>
        <div class="star"></div>
        <div class="star"></div>
        <div class="star"></div>
      </div>
    </label>
    <input type="file" id="file" name="file" accept=".txt,.pdf,.doc,.docx" required />

    <!-- buttons appear only after a file is chosen -->
    <div id="buttonsContainer" class="hidden">
      <button type="submit" formaction="/summarize" id="btnSummarize">
        Summarize
        <div class="bg-animation" aria-hidden="true">
          <div class="swirl"></div>
          <div class="swirl"></div>
          <div class="swirl"></div>
        </div>
      </button>
      <button type="submit" formaction="/create_notes" id="btnCreateNotes">
        Create Notes
        <div class="bg-animation" aria-hidden="true">
          <div class="pencil"></div>
          <div class="pencil"></div>
          <div class="pencil"></div>
        </div>
      </button>
      <button type="submit" formaction="/evaluate" id="btnEvaluate">
        Evaluate
        <div class="bg-animation" aria-hidden="true">
          <div class="checkmark"></div>
          <div class="checkmark"></div>
          <div class="checkmark"></div>
        </div>
      </button>
    </div>
  </form>

  <script>
    const fileInput = document.getElementById('file');
    const fileLabel = document.getElementById('fileLabel');
    const buttons = document.getElementById('buttonsContainer');

    fileInput.addEventListener('change', function() {
      if (this.files && this.files.length > 0) {
        // Show filename
        fileLabel.childNodes[0].nodeValue = this.files[0].name;
        // Show buttons
        buttons.classList.remove('hidden');
      } else {
        // Reset label and hide buttons
        fileLabel.childNodes[0].nodeValue = 'Choose File';
        buttons.classList.add('hidden');
      }
    });
  </script>
</body>
</html>
